<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>折线图</title>
  <!-- 引入 ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.1.1/dist/echarts.min.js"></script>
</head>
<body>
  <div id="chart" style="width: 800px; height: 600px;"></div>

  <script>
    // 创建折线图实例
    var chart = echarts.init(document.getElementById('chart'));

    // 读取 CSV 文件
    var years = [];
    var values = [];
    var csvFilePath = window.location.href + "data.csv"; // 使用绝对路径
    document.write(csvFilePath)
    var xhr = new XMLHttpRequest();
    xhr.open('GET', csvFilePath, true);
    xhr.onreadystatechange = function () {
      if (xhr.readyState === 4 && xhr.status === 200) {
        var lines = xhr.responseText.split('\n');
        years = lines[0].split(',');
        for (var i = 1; i < lines.length; i++) {
          values.push(lines[i].split(','));
        }
        renderChart();
      }
    };
    xhr.send();

    // 渲染折线图
    function renderChart() {
      var option = {
        title: {
          text: '折线图'
        },
        xAxis: {
          type: 'category',
          data: years
        },
        yAxis: {
          type: 'value'
        },
        series: []
      };

      for (var i = 0; i < values.length; i++) {
        option.series.push({
          name: 'Series ' + (i + 1),
          type: 'line',
          data: values[i]
        });
      }

      chart.setOption(option);
    }
  </script>
</body>
</html>
